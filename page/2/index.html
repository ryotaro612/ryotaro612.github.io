<!DOCTYPE html>
<html lang="ja">

<head>
	<meta name="generator" content="Hugo 0.147.7"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  
  
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-W5TDG76');
  </script>
  
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=300,initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
    integrity="sha512-NmLkDIU1C/C88wi324HBc+S2kLhi08PN5GDeUVVVC/BVt/9Izdsc9SVeVfA1UZbY3sHUlDSyRXhCzHfr6hmPPw=="
    crossorigin="anonymous" />
  
  <link rel="stylesheet" href="http://localhost:1313/scss/base.min.d5f9c6d3a478082690f838fa06a179ccee4dea5bd3f0cb3f4a357e2803c48d33.css">
  
  <link rel="stylesheet" href="http://localhost:1313/scss/base.ja.min.66816a64bc4ce50ec1c4b76199ca9d69163fc8a69f7abc6ea758d1968d8618b0.css">
  

<link rel="stylesheet" href="http://localhost:1313/scss/articles.min.3ceb81a62f07e7057aa63e938b7f0479d4643c093f1c72984a82a68278ddbba3.css">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://kit.fontawesome.com/e48a1b5aa5.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4"
    crossorigin="anonymous"></script>
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
  <title>Blanket</title>
</head>

<body>
  
  
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W5TDG76" height="0" width="0"
      style="display:none;visibility:hidden" />
  </noscript>
  
  
  <header class="navigation">
    <h2><a href="http://localhost:1313/">Blanket</a></h2>
    <nav>
      <ul>
        <li><a href="http://localhost:1313/about">About</a></li>
        <li><a href="http://localhost:1313/posts">Posts</a></li>
        <li><a href="http://localhost:1313/tags">Tags</a></li>
        
        <li><a href="http://localhost:1313/en/">en</a></li>
        
      </ul>
      <ul>
        
        <li>
          <a href="https://github.com/ryotaro612">
            <i class="fab fa-github"></i>
          </a>
        </li>
        
        
        <li>
          <a href="https://www.linkedin.com/in/ryotaro612/">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </li>
        
        
        <li>
          <a href="https://speakerdeck.com/ryotaro612/">
            <i class="fa-brands fa-speaker-deck"></i>
          </a>
        </li>
        
        <li>
          <a href="http://localhost:1313/%20index.xml">
            <i class="fas fa-rss"></i>
          </a>
        </li>
        
      </ul>
    </nav>
  </header>
  
<main>
  <h1>Posts</h1>
  
  
  <article>
    <h3><a href="http://localhost:1313/posts/consistent-hashing-and-random-trees-distributed-caching-protocols-for-relieving-hot-spots-on-the-world-wide-web/">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a></h3>
    <div class="summary"><p>コンシステントハッシュ法は、Content Delivery Network (CDN) 規模のキャッシュシステムの負荷分散に<a href="https://www.oreilly.com/library/view/designing-data-intensive-applications/9781491903063/">使われている</a>。
コンシステントハッシュ法を提案した<a href="https://dl.acm.org/doi/10.1145/258533.258660">Consistent Hashing and Random Trees: Distributed Caching Protocols for Relieving Hot Spots on the World Wide Web</a>は、特定のキャッシュサーバーへのリクエストの集中を避けることを目的にする。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E3%82%B3%E3%83%B3%E3%82%B7%E3%82%B9%E3%83%86%E3%83%B3%E3%83%88%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E6%B3%95/">
            #コンシステントハッシュ法
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        March 18, 2025
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/coverage-is-not-strongly-correlated-with-test-suite-effectiveness/">Coverage Is Not Strongly Correlated With Test Suite Effectiveness (2014)</a></h3>
    <div class="summary"><p>コードカバレッジに対する批判を散見する。
たとえば、<a href="https://www.oreilly.com/library/view/software-engineering-at/9781492082781/">Googleのソフトウェアエンジニアリング</a>の11.2.4節「コードカバレッジについてもメモ」には、コードカバレッジに対する2つの批判がある。
まず、最低限満たすべきコードカバレッジを設定すると、すぐに水準を下回るコードがすぐにリポジトリに取り込まれはじめる。
次に、テストカバレッジが保証するのはテストがコードが実行することだけであり、実行したコードにあるバグを見つけるとは限らない。</p>
<p>このような経験則や論理による批判にくらべると、実験にもとづく批判を見聞することは少ないだろう。
<a href="https://www.cs.ubc.ca/~rtholmes/papers/icse_2014_inozemtseva.pdf">Coverage Is Not Strongly Correlated with Test Suite Effectiveness</a>は、ICSE 2024でMost influential paper ICSE N-10に<a href="https://conf.researchr.org/info/icse-2024/awards">選ばれた</a>文献で、OSSのテストカバレッジとテストの有効性の相関を調べた。
<a href="https://poi.apache.org/devel/subversion.html">Apache POI</a>, <a href="https://github.com/google/closure-compiler">Closure</a>, <a href="https://hsqldb.org/">HSQLDB</a>, <a href="https://www.jfree.org/jfreechart/">JFreeChart</a>, <a href="https://www.joda.org/joda-time/">Joda Time</a>のコードベースをミューテーション解析し、テストケースの有効性を、テストケースを失敗させた変異体の数で定量化した。
テストケースの数とテストスイートのカバレッジは、有効性との間に中から高の相関があった。
一方、テストケースの数を固定すると、カバレッジと有効性の相関は低から中に減少した。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E3%82%B3%E3%83%BC%E3%83%89%E3%82%AB%E3%83%90%E3%83%AC%E3%83%83%E3%82%B8/">
            #コードカバレッジ
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        March 3, 2025
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/on-the-fly-garbage-collection-an-exercise-in-cooperation/">On the Fly Garbage Collection an Exercise in Cooperation (1978)</a></h3>
    <div class="summary"><p>Go1.5で、ガベージコレクション (GC) のアルゴリズムが3色マーキングによるコンカレント マーク&amp;スイープに変わった。
このアルゴリズムの起源を辿ると、1978年の<a href="https://lamport.azurewebsites.net/pubs/garbage.pdf">On the Fly Garbage Collection an Exercise in Cooperation</a>にいきつく。
ポインタをたどってヒープを黒や灰色に着色するマーキングフェーズと、解放してよい白のヒープを解放するアペンディングフェーズ、この2つのフェーズを繰り返す。
アルゴリズムはStop The World (STW)を抑制することを主眼におく。</p>
<p>2015年に書かれたThe Go Blogの<a href="https://go.dev/blog/go15gc">Go GC: Prioritizing low latency and simplicity</a>によれば、3色マーキングのコンカレント マーク&amp;スイープはエンタープライズ向けのGCではない。
それでも、3色マーキングの考え自体はJavaのZGCなど他のガベージコレクションで<a href="https://typeset.io/pdf/deep-dive-into-zgc-a-modern-garbage-collector-in-openjdk-2aa9ffwc.pdf">採用されている</a>。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E3%82%AC%E3%83%99%E3%83%BC%E3%82%B8%E3%82%B3%E3%83%AC%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3/">
            #ガベージコレクション
          </a>
        </li>
        
        <li class="tag">
          <a href="http://localhost:1313/tags/go/">
            #Go
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        February 11, 2025
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/s3-sign/">署名つきURLでS3オブジェクトを公開する</a></h3>
    <div class="summary"><p>S3バケットにあるプライベートオブジェクトの署名つきURLを発行すれば、URLを知るユーザーのみにオブジェクトを公開できる。
発行方法は<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/ShareObjectPreSignedURL.html">AWSの記事</a>で紹介されている。</p>
<p>記事にしたがってURLを発行してみたところ、バケットとファイル手間がかかった。
また、URLを発行するクライアントを生成する方法が記事になく、別途調査する必要があった。</p>
<p>これまでに何度かURLを発行する方法を調べたことがあるので、今後のために、バケットとファイルを用意するterraformのコードと、ファイルのURLを発行するGoのコードをGitHubの<a href="https://github.com/ryotaro612/s3-signin">リポジトリ</a>に公開した。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/s3/">
            #S3
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        January 30, 2025
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/highly-available-transactions-virtues-and-limitations/">Highly Available Transactions Virtues and Limitations (2013)</a></h3>
    <div class="summary"><h2 id="概要">概要</h2>
<p>CAP定理の一貫性、可用性、ネットワークの分断耐性のトリレンマは、1つを完全に切り捨てるのではなく、現実には、3つの性質の優先順位をつける問題になる。
システムの一貫性と可用性の均衡を設計するときは、求める一貫性に対して実現できる可用性を知らないといけない。
<a href="https://www.vldb.org/pvldb/vol7/p181-bailis.pdf">Highly Available Transactions Virtues and Limitations</a> は、既存の一貫性を両立できる可用性の水準と対応させ、両性質の強さで一貫性と可用性のペアを半順序関係に整理した。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E5%88%86%E6%95%A3%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0/">
            #分散システム
          </a>
        </li>
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E3%83%88%E3%83%A9%E3%83%B3%E3%82%B6%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3/">
            #トランザクション
          </a>
        </li>
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E5%8F%AF%E7%94%A8%E6%80%A7/">
            #可用性
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        January 30, 2025
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/jepsen/">分散システム向けのフォールトインジェクションフレームワーク Jepsen</a></h3>
    <div class="summary"><h2 id="概要">概要</h2>
<p>分散システムのテストをClojureで実装するためのフレームワークに<a href="https://jepsen.io/">Jepsen</a>がある。
Jepsenのテストケースは、システムへの操作、操作後のシステムに期待する状態、障害と操作のスケジューリングの3要素からなる。
テストケースは、スケジューリング通りに操作と障害を起こし、最後にシステムの応答が期待通りか確認する。
Jepsenの公式サイトにはJepsenによる<a href="https://jepsen.io/analyses">主要な分散システムのテスト結果</a>が公開されている。
また、Kubernetes内部で使わているKVSの<a href="https://kubernetes.io/ja/docs/tasks/administer-cluster/configure-upgrade-etcd/">etcd</a>の<a href="https://etcd.io/blog/2020/jepsen-343-results/">公式ウェブサイト</a>にもJepsenのテスト結果が公開されている。
分散システムの開発側からも参照されているので、分散システムにおけるJepsenの認知度は高いように思える。</p>
<p>その一方で、公式ドキュメントは整備されていないようだった。
たとえば、チュートリアルはetcdを例題にJepsenの使い方を解説しているが、etcdのクライアントライブラリが古く、実際に実装してもチュートリアル通りに実行できない。
かわりに、2相コミットするアプリケーションとテストケースを実装したが、実装のためにJepsenのソースコードを調べる必要があった。
実装したアプリケーションとテストケースは<a href="https://github.com/ryotaro612/jepsen-tutorial-xa">GitHubのリポジトリ</a>に公開してある。</p>
<p>それでも、依然として、Jepsenを使ってテストケース実装するほうが、スクラッチからテストケースを実装するよりも効率的ではあると思う。
そこで、今後の備忘録をかねて、Jepsenを試すにあたって、チュートリアルに不足を感じた部分を書き留めておく。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E5%88%86%E6%95%A3%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0/">
            #分散システム
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        January 26, 2025
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/origin-of-type-theory/">型理論のはじまり</a></h3>
    <div class="summary"><p>型理論の起源はラッセルのパラドクスにある。
ただし、厳密な起源となる出来事は何かという問いになると、意見は分かれると思う。
名前の通り、ラッセルのパラドクスはラッセルが見つけたものだが、集合論を確立したカントールも同時期に独立して同等のパラドクスを発見した。
またラッセルとフレーゲの往復書簡の中で、フレーゲは、彼の概念記法における述語は述語を引数にとらないと回答した。
ラッセルが概念記法の要素の階層関係を発展させてパラドクスの解消を試みたことを考えれば、フレーゲの述語論理を型理論の起源とみなすこともできるだろう。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/%E5%9E%8B%E7%90%86%E8%AB%96/">
            #型理論
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        December 30, 2024
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/runc/">2024年11月のruncの実装</a></h3>
    <div class="summary"><p>runcは抽象度の低いコンテナのランタイムであると同時に、そのランタイムを操作するCLIでもある。
もともとruncはdockerの一部だったが、2015年にdockerからのスピンアウトされた。
containerdがruncでコンテナの操作するので、今でもdockerはruncでコンテナを操作していることになる。
この記事は、runcの実装に使われているLinuxの機能を紹介する。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/runc/">
            #Runc
          </a>
        </li>
        
        <li class="tag">
          <a href="http://localhost:1313/tags/container/">
            #Container
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        December 8, 2024
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/question-and-answer-service/">Question and Answer Service</a></h3>
    <div class="summary"><p>64000rpsサーバを仮定している。</p></div>
    <div class="article-footer">
      
      <span class="date">
        
        October 31, 2024
        
      </span>
    </div>
  </article>
  
  <article>
    <h3><a href="http://localhost:1313/posts/back-of-envelope-calculations/">Back of Envelope Calculations</a></h3>
    <div class="summary"><p>システム設計の面接では、与えられた情報からシステムに求められるシステムリソースを試算することを、back of the envelope calculations (estimation)という。</p></div>
    <div class="article-footer">
      
      <ul class="tags">
        
        <li class="tag">
          <a href="http://localhost:1313/tags/back-of-the-envelope-estimation/">
            #Back of the Envelope Estimation
          </a>
        </li>
        
      </ul>
      
      <span class="date">
        
        September 24, 2024
        
      </span>
    </div>
  </article>
  
</main>

  

<ul class="pagination">
  
  <li>
    <a href="/">
      <i class="fa-solid fa-xl fa-angles-left"></i>
    </a>
  </li>
  <li>
    <a href="/">
      <i class="fa-solid fa-xl fa-angle-left"></i>
    </a>
  </li>
  
  
  <li>
    <a href="/page/3/">
      <i class="fa-solid fa-xl fa-angle-right"></i>
    </a>
  </li>
  <li>
    <a href="/page/34/">
      <i class="fa-solid fa-xl fa-angles-right"></i>
    </a>
  </li>
  
</ul>

  <footer>
    <small>© Ryotaro Nakamura. All Rights Reserved.</small>
  </footer>
</body>


</html>
