<!DOCTYPE html>
<html lang="en">

<head>
  
  
  <script>(function (w, d, s, l, i) {
      w[l] = w[l] || []; w[l].push({
        'gtm.start':
          new Date().getTime(), event: 'gtm.js'
      }); var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
          'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', 'GTM-W5TDG76');
  </script>
  
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=300,initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
    integrity="sha512-NmLkDIU1C/C88wi324HBc+S2kLhi08PN5GDeUVVVC/BVt/9Izdsc9SVeVfA1UZbY3sHUlDSyRXhCzHfr6hmPPw=="
    crossorigin="anonymous" />
  
  <link rel="stylesheet" href="https://ryotaro.dev/scss/base.min.d5f9c6d3a478082690f838fa06a179ccee4dea5bd3f0cb3f4a357e2803c48d33.css">
  
  <link rel="stylesheet" href="https://ryotaro.dev/scss/base.en.min.fabf7968ffbe5ff626ec9a346f0d38e91d0078974112f713b9d25782380a5073.css">
  

<link rel="stylesheet" href="https://ryotaro.dev/scss/single.min.8ed5cbfb3dc516e9c4459a65252e4e6e8e9026aabfa9eb9f602cf53b30754966.css">

<link rel="stylesheet" href="https://ryotaro.dev/scss/posts/single.min.0008713f3f7556e78c13cb8efde9cf534239cb206c10ba85ce5a76e6ae9ce758.css">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://kit.fontawesome.com/e48a1b5aa5.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css"
    integrity="sha384-vKruj+a13U8yHIkAyGgK1J3ArTLzrFGBbBc0tDp4ad/EyewESeXE/Iv67Aj8gKZ0" crossorigin="anonymous">
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"
    integrity="sha384-PwRUT/YqbnEjkZO0zZxNqcxACrXe+j766U2amXcgMg5457rve2Y7I6ZJSm2A0mS4"
    crossorigin="anonymous"></script>
  
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"
    integrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>
  <title>Coverage is Not Strongly Correlated with Test Suite Effectiveness (2014)</title>
</head>

<body>
  
  
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W5TDG76" height="0" width="0"
      style="display:none;visibility:hidden" />
  </noscript>
  
  
  <header class="navigation">
    <h2><a href="https://ryotaro.dev/en/">Blanket</a></h2>
    <nav>
      <ul>
        <li><a href="https://ryotaro.dev/en/%20about">About</a></li>
        <li><a href="https://ryotaro.dev/en/%20posts">Posts</a></li>
        <li><a href="https://ryotaro.dev/en/%20tags">Tags</a></li>
        
        <li><a href="https://ryotaro.dev/posts/coverage-is-not-strongly-correlated-with-test-suite-effectiveness/">ja</a></li>
        
      </ul>
      <ul>
        
        <li>
          <a href="https://github.com/ryotaro612">
            <i class="fab fa-github"></i>
          </a>
        </li>
        
        
        <li>
          <a href="https://www.linkedin.com/in/ryotaro612/">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </li>
        
        
        <li>
          <a href="https://speakerdeck.com/ryotaro612/">
            <i class="fa-brands fa-speaker-deck"></i>
          </a>
        </li>
        
        <li>
          <a href="https://ryotaro.dev/en/%20index.xml">
            <i class="fas fa-rss"></i>
          </a>
        </li>
        
      </ul>
    </nav>
  </header>
  
<main>
  <h1>Coverage is Not Strongly Correlated with Test Suite Effectiveness (2014)</h1>
  <ul class="tags">
    
    <li class="tag">
      <a href="https://ryotaro.dev/en/tags/code-coverage/">
	#Code Coverage
      </a>
    </li>
    
  </ul>  
  <span class="date">March 3, 2025</span>    
  <div>
    <p>There are debates concerning the ability of code coverage to measure the effectiveness of test suites.
For instance, Winters et al. argued that setting an objective coverage threshold does not necessarily lead developers to write meaningful tests, as discussed in &lsquo;A Note on Code Coverage&rsquo; (Section 11.2.4) in <a href="https://www.oreilly.com/library/view/software-engineering-at/9781492082781/"><em>Software Engineering at Google</em></a>.
They also claimed that coverage percentage does not guarantee fault detection ability.</p>
<p>compared with the abundance of rational arguments and anecdotal experiences, empirical studies on this topic are relatively rare.
<a href="https://www.cs.ubc.ca/~rtholmes/papers/icse_2014_inozemtseva.pdf">Coverage Is Not Strongly Correlated With Test Suite Effectiveness</a> (ICSE 2014) is an empirical study that was awarded the <a href="https://conf.researchr.org/info/icse-2024/awards">most influential paper ICSE N-10 at ICSE 2024</a>.
The paper investigated correlation between test suite size, coverage and effectiveness.
The authors applied mutation testing to <a href="https://poi.apache.org/devel/subversion.html">Apache POI</a>, <a href="https://github.com/google/closure-compiler">Closure</a>, <a href="https://hsqldb.org/">HSQLDB</a>, <a href="https://www.jfree.org/jfreechart/">JFreeChart</a>, and <a href="https://www.joda.org/joda-time/">Joda Time</a>.
They found a moderate to high correlation between the effectiveness and coverage of a test suite when ignoring the influence of the number of test cases.
However, the correlation dropped when suite size was controlled for.</p>
<p>They selected reasonably large projects with at least 100,000 lines of code and approximately 1,000 test cases to enhance the study&rsquo;s novelty and generalizability.
They also required the projects to use Ant as a build system and JUnit as a test harness to facilitate automated data collection.
Apache POI is an API for Microsoft Documents, Closure is a Javascript optimizer, HSQLDB is an RDBMS written in Java, JFreeChart is a Java chart library, and Joda Time is a date and time library for Java prior to Java SE 8.</p>
<p>They generated test suites of fixed size by randomly selecting methods annotated with <code>@Test</code>, ensuring no method was selected more than once.
<code>@Test</code> is the Junit annotation that marks annotated method as a test case.
They created test suites with fixed sizes, ranging from 3 to 3,000 methods.
They generated at most 1,000 test suites for each size.</p>
<p>They used C0, C1, and MCC coverage metrics.
C0, or statement coverage, measures the fraction of executable statements executed by the test suite. C1, or decision coverage, measures the fraction of branches executed by the test suite. MCC (modified condition coverage) is the most difficult to achieve and is not commonly used in practice.</p>
<p>The study performed <a href="https://research.google/pubs/state-of-mutation-testing-at-google/">mutation testing</a> using <a href="https://pitest.org/">PIT</a>, a mutation testing framework.
In mutation testing, faults are seeded into the program before a test suite runs. A program with seeded faults is called a mutant.
The quality of the test suite was gauged by the number of mutants or faults it detected.</p>
<p>Effectiveness was measured in two ways: raw effectiveness and normalized effectiveness. The raw value is the number of mutants a test suite detected divided by the total number of mutants generated for the program under test. The normalized effectiveness is the number of mutants detected divided by the number of mutants the test suite covers.</p>
<p>They used <a href="https://www.rdocumentation.org/packages/stats/versions/3.6.2/topics/lm">R&rsquo;s <code>lm</code></a> to fit a linear model to correlate normalized effectiveness with the number of test cases in a test suite.
The resulting fit is shown in the following figure.
The $R^2$ denotes the coefficient of determination.
There was a moderate to very high correlation for all projects except HSQLDB.
<img alt="test-size" src="/coverage-is-not-strongly-correlated-with-test-suite-effectiveness/test-size.png"></p>
<p>They computed <a href="https://www.rdocumentation.org/packages/Kendall/versions/2.2.1/topics/Kendall">Kendall&rsquo;s \(\tau\)</a> to measure how the effectiveness of a test suite correlates with its coverage when ignoring suite size influence. Let \(x_i\) \(i\)th test suite&rsquo;s coverage, \(y_i\) its effectiveness, \(n\) the number of test suites, \(\textit{sgn}\) the signum function:
$$
\tau = \frac{n\sum_{i&lt;j}\left(\textit{sgn}(x_j-x_i)\textit{sgn}(y_j-y_i)\right)}{n(n-1)}
$$</p>
<p>Kendall&rsquo;s \(\tau\) indicated that stronger forms of code coverage did not improve the measurement of effectiveness.
The following two figures show Kendall&rsquo;s \(tau\) for each kind of code coverage. The first figure represents normalized effectiveness, and the second shows raw effectiveness.
The \(\tau\) values did not vary among the kinds of code coverage.
<img alt="normalized" src="/coverage-is-not-strongly-correlated-with-test-suite-effectiveness/normalized.png">
<img alt="non-normalized" src="/coverage-is-not-strongly-correlated-with-test-suite-effectiveness/non-normalized.png"></p>
<p>Comparing the correlation between normalized effectiveness and coverage among test suites of the same size, a drop in correlation was observed. The following figures plot normalized effectiveness against coverage, with numbers on the right indicating the number of test cases in a suite.
<img alt="grid" src="/coverage-is-not-strongly-correlated-with-test-suite-effectiveness/grid.png"></p>
<p>While a large number of test cases does not necessarily ensure high effectiveness, the empirical study shows a moderate to high correlation between the size of a test suite and its effectiveness.
Is the number of test cases a better indicator of effectiveness than code coverage?</p>
  </div>
</main>

  
<ul class="pagination">
    
    <li>
      <a href="/en/posts/on-the-fly-garbage-collection-an-exercise-in-cooperation/">
	<i class="fa-solid fa-xl fa-angle-left"></i>
      </a>
    </li>
    
    
    <li>
      <a href="/en/posts/consistent-hashing-and-random-trees-distributed-caching-protocols-for-relieving-hot-spots-on-the-world-wide-web/">
	<i class="fa-solid fa-xl fa-angle-right"></i>
      </a>
    </li>
    
</ul>


  <footer>
    <small>© Ryotaro. All Rights Reserved.</small>
  </footer>
</body>


</html>
